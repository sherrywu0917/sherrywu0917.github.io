<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>SASS使用二三事 | lying fox</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="sass管理z-indexz-index的值和上下文有关系，在复杂布局中要跟踪z-index比较困难，z-index的取值范围很广，很容易出错，所以可以使用sass预处理器去统一管理。 定义浮层首先，我们可以借助sass 3.3引入的Map定义一个数据结构，key代表了不同浮层类型，value即对应的z-index值：123456789$z-layers: (    &apos;toast&apos;:">
<meta name="keywords" content="css,sass">
<meta property="og:type" content="article">
<meta property="og:title" content="SASS使用二三事">
<meta property="og:url" content="https://sherrywu0917.github.io/2017/08/28/sass应用/index.html">
<meta property="og:site_name" content="lying fox">
<meta property="og:description" content="sass管理z-indexz-index的值和上下文有关系，在复杂布局中要跟踪z-index比较困难，z-index的取值范围很广，很容易出错，所以可以使用sass预处理器去统一管理。 定义浮层首先，我们可以借助sass 3.3引入的Map定义一个数据结构，key代表了不同浮层类型，value即对应的z-index值：123456789$z-layers: (    &apos;toast&apos;:">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2024-02-19T04:51:45.054Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SASS使用二三事">
<meta name="twitter:description" content="sass管理z-indexz-index的值和上下文有关系，在复杂布局中要跟踪z-index比较困难，z-index的取值范围很广，很容易出错，所以可以使用sass预处理器去统一管理。 定义浮层首先，我们可以借助sass 3.3引入的Map定义一个数据结构，key代表了不同浮层类型，value即对应的z-index值：123456789$z-layers: (    &apos;toast&apos;:">
  
    <link rel="alternate" href="/atom.xml" title="lying fox" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">lying fox</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://sherrywu0917.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-sass应用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/28/sass应用/" class="article-date">
  <time datetime="2017-08-28T10:15:21.000Z" itemprop="datePublished">2017-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      SASS使用二三事
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="sass管理z-index"><a href="#sass管理z-index" class="headerlink" title="sass管理z-index"></a>sass管理z-index</h3><p>z-index的值和上下文有关系，在复杂布局中要跟踪z-index比较困难，z-index的取值范围很广，很容易出错，所以可以使用sass预处理器去统一管理。</p>
<h4 id="定义浮层"><a href="#定义浮层" class="headerlink" title="定义浮层"></a>定义浮层</h4><p>首先，我们可以借助sass 3.3引入的Map定义一个数据结构，key代表了不同浮层类型，value即对应的z-index值：<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$z-layers</span>: (</span><br><span class="line">    <span class="string">'toast'</span>:          <span class="number">4000</span>,</span><br><span class="line">    <span class="string">'modal'</span>:          <span class="number">3000</span>,</span><br><span class="line">    <span class="string">'dropdown'</span>:       <span class="number">2000</span>,</span><br><span class="line">    <span class="string">'mask'</span>:           <span class="number">1000</span>,</span><br><span class="line">    <span class="string">'default'</span>:         <span class="number">1</span>,</span><br><span class="line">    <span class="string">'below'</span>:          -<span class="number">1</span>,</span><br><span class="line">    <span class="string">'bottomless-pit'</span>: -<span class="number">10000</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<h4 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> z(<span class="variable">$layer</span>) &#123;</span><br><span class="line">    <span class="keyword">@return</span> map-get(<span class="variable">$z-layers</span>, <span class="variable">$layer</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用了sass的map-get方法，如果$layer参数存在于$z-layers中，会返回对应的value值，如z(‘toast’)，返回对应的值为4000；若不存在于$z-layers中，则返回null。属性为null时，sass的编译不会输出。<br>也可以借助map-has-key方法检查元素是否存在，对于不存在的元素使用@warn指令输出警告信息，方便我们在开发的时候发现问题。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> z(<span class="variable">$layer</span>) &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="keyword">not</span> map-has-key(<span class="variable">$z-layers</span>, <span class="variable">$layer</span>) &#123;</span><br><span class="line">        <span class="keyword">@warn</span> <span class="string">"No z-index found in $z-layers map for `#&#123;$layer&#125;`. Property omitted."</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@return</span> map-get(<span class="variable">$z-layers</span>, <span class="variable">$layer</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function方式</span></span><br><span class="line"><span class="selector-class">.m-mask</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: z(<span class="string">'mask'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//mixin方式</span></span><br><span class="line"><span class="selector-class">.m-mask</span> &#123;</span><br><span class="line">    <span class="keyword">@include</span> z(<span class="string">'mask'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于单个属性来说，建议采用function的定义方式，比起mixin方式，使用起来更加清晰、简单。<br><a id="more"></a></p>
<h4 id="嵌套层级"><a href="#嵌套层级" class="headerlink" title="嵌套层级"></a>嵌套层级</h4><p>在层级关系比较多的情况下，单一层级可能无法满足我们的需求，如弹窗里面还有很多的层级关系时，这个时候，我们可以使用嵌套的层级定义方式，针对modal进行再扩展，对modal里面的元素进一步定义层级数值。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$z-layers</span>: (</span><br><span class="line">    <span class="string">'toast'</span>:          <span class="number">4000</span>,</span><br><span class="line">    <span class="string">'modal'</span>:          (</span><br><span class="line">        <span class="string">"base"</span>: <span class="number">3200</span>,</span><br><span class="line">        <span class="string">"close"</span>: <span class="number">3100</span>,</span><br><span class="line">        <span class="string">"header"</span>: <span class="number">3050</span>,</span><br><span class="line">        <span class="string">"footer"</span>: <span class="number">3000</span></span><br><span class="line">    ),</span><br><span class="line">    <span class="string">'dropdown'</span>:       <span class="number">2000</span>,</span><br><span class="line">    <span class="string">'mask'</span>:           <span class="number">1000</span>,</span><br><span class="line">    <span class="string">'default'</span>:         <span class="number">1</span>,</span><br><span class="line">    <span class="string">'below'</span>:          -<span class="number">1</span>,</span><br><span class="line">    <span class="string">'bottomless-pit'</span>: -<span class="number">10000</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>想要定义$z-layers中modal内部的层级关系，可以用嵌套的Map去设置，如上所示。要处理嵌套的层级关系，对应的z函数可以是：<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> map-has-nested-keys(<span class="variable">$map</span>, <span class="variable">$keys</span>...) &#123;</span><br><span class="line">  <span class="keyword">@each</span> <span class="variable">$key</span> in <span class="variable">$keys</span> &#123;</span><br><span class="line">    <span class="keyword">@if</span> <span class="keyword">not</span> map-has-key(<span class="variable">$map</span>, <span class="variable">$key</span>) &#123;</span><br><span class="line">      <span class="keyword">@return</span> false;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$map</span>: map-get(<span class="variable">$map</span>, <span class="variable">$key</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@return</span> true;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@function</span> map-deep-get(<span class="variable">$map</span>, <span class="variable">$keys</span>...) &#123;</span><br><span class="line">  <span class="keyword">@each</span> <span class="variable">$key</span> in <span class="variable">$keys</span> &#123;</span><br><span class="line">    <span class="variable">$map</span>: map-get(<span class="variable">$map</span>, <span class="variable">$key</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@return</span> <span class="variable">$map</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@function</span> z(<span class="variable">$layers</span>...) &#123;</span><br><span class="line">  <span class="keyword">@if</span> <span class="keyword">not</span> map-has-nested-keys(<span class="variable">$z-layers</span>, <span class="variable">$layers</span>...) &#123;</span><br><span class="line">    <span class="keyword">@warn</span> <span class="string">"No layer found for `#&#123;inspect($layers...)&#125;` in $z-layers map. Property omitted."</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@return</span> map-deep-get(<span class="variable">$z-layers</span>, <span class="variable">$layers</span>...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其中map-has-nested-keys方法可以检查元素是否存在于已经定义的$z-layers中：</p>
<ol>
<li>若$keys只有一个值’toast’，@each只需要循环一次，在循环内，$map被赋值为’toast’对应的z-index值，最后返回true值；</li>
<li>若$keys有两个值’modal’和’base’，@each循环两次，第一次循环，先检查’modal’是否存在于$z-layers中，再将$map赋值为map-get($z-layers, ‘modal’)，即内部嵌套的modal的map，第二次循环先判断’base’是否存在于$map中，若不存在直接返回false，若存在$map被赋值为’base’对应的z-index值，最后返回true值；<br>map-deep-get方法用于获得对应的z-index值，思路和map-has-nested-keys方法一致，只是前者返回true/false，后者返回$map值。<br>具体的调用方式如下所示：<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.modal</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">z-index</span>: z(<span class="string">"modal"</span>, <span class="string">"base"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.close-button</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: z(<span class="string">"modal"</span>, <span class="string">"close"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">header</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: z(<span class="string">"modal"</span>, <span class="string">"header"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">footer</span> &#123;</span><br><span class="line">    <span class="attribute">z-index</span>: z(<span class="string">"modal"</span>, <span class="string">"footer"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.toast</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: z(<span class="string">"toast"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="另一种z-index管理思路"><a href="#另一种z-index管理思路" class="headerlink" title="另一种z-index管理思路"></a>另一种z-index管理思路</h4><p>首先创建一个层级列表，在这个列表中，元素的出现顺序是从低到高，使用sass提供的index方法获取元素在$elements中的顺序，即为该元素的z-index值。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$elements</span>: project-covers, sorting-bar, modals, navigation;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.project-cover</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: index(<span class="variable">$elements</span>, project-covers);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出的z-index为1，与javascript不同，sass的索引值从1开始，就像css一样，css的:nth-child(n)中的n也是从1开始。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.project-cover</span> &#123;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>个人觉得，这个方法更简单，适合于轻量级的项目，但灵活性不够好，取值范围受限于index值，对于嵌套的层级关系不友好，扩展性不好，对于较复杂项目更建议用前一种Map的形式来管理。</p>
<h3 id="sass主题管理"><a href="#sass主题管理" class="headerlink" title="sass主题管理"></a>sass主题管理</h3><p>在项目开发中，涉及到不同主题的切换，例如在正文阅读时，有白天、黑夜、蓝色、黄色四种主题，不同主题配色不同，如果直接用css，结构复杂并且很难维护。利用scss提供的变量定义和方法，可以降低开发和维护成本。</p>
<h4 id="sass管理颜色"><a href="#sass管理颜色" class="headerlink" title="sass管理颜色"></a>sass管理颜色</h4><p>首先，sass可以对整个项目常用的一些颜色进行定义，例如本次项目通用的红色值为#ED6460，则可以在单独的文件_color.scss中定义该色值，其他scss文件通过@import引用。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$black</span>: <span class="number">#24211F</span>;</span><br><span class="line"><span class="variable">$red</span>: <span class="number">#ED6460</span>;</span><br><span class="line"><span class="variable">$blue</span>: <span class="number">#60aaed</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$border-gray</span>: <span class="number">#ededed</span>;</span><br><span class="line"><span class="variable">$bg-gray</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line"><span class="variable">$btn-gray</span>: <span class="number">#807A73</span>;</span><br></pre></td></tr></table></figure></p>
<h4 id="主题定义"><a href="#主题定义" class="headerlink" title="主题定义"></a>主题定义</h4><p>首先，定义一个Map，记录不同的主题和与之关联的颜色，每个主题下细分了不同用途的色值。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'./color.scss'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//主题base设置</span></span><br><span class="line"><span class="variable">$theme</span>: (</span><br><span class="line">    light: (</span><br><span class="line">        bg: <span class="number">#fff</span>,              //背景色</span><br><span class="line">        color: <span class="variable">$black</span>,         //正文颜色</span><br><span class="line">        title: <span class="number">#A83A45</span>,        //章节标题颜色</span><br><span class="line">        link: <span class="number">#60AAED</span>,         //底部链接颜色</span><br><span class="line">        border: <span class="number">#ededed</span>,       //正文底部border颜色</span><br><span class="line">        themeBorder: <span class="number">#d8d8d8</span>   //主题切换btn选中状态的border颜色</span><br><span class="line">    ),</span><br><span class="line">    dark: ( …… ),</span><br><span class="line">    blue: ( …… ),</span><br><span class="line">    yellow: ( …… )</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">@each</span> <span class="variable">$name</span>, <span class="variable">$theme</span> in <span class="variable">$theme</span> &#123;</span><br><span class="line">    <span class="selector-class">.theme--</span>#&#123;<span class="variable">$name</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">color</span>: map-get(<span class="variable">$theme</span>, color);</span><br><span class="line">        <span class="attribute">background-color</span>: map-get(<span class="variable">$theme</span>, bg);</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.m-main</span> <span class="selector-class">.content</span> &#123;</span><br><span class="line">            <span class="selector-tag">h1</span>, <span class="selector-tag">h2</span> &#123;</span><br><span class="line">                <span class="attribute">color</span>: map-get(<span class="variable">$theme</span>, title);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.link</span> &#123;</span><br><span class="line">            <span class="attribute">color</span>: map-get(<span class="variable">$theme</span>, link);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ... 其他涉及主题配色的选择器</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过@each去遍历Map，.theme–#{$name}编译后会生成.theme-light, .theme-dark等，在.theme–#{$name} 选择器内部，可以定义该主题下不同元素的样式，具体颜色可以通过map-get方法获得。<br>对于button这种，在不同主题下颜色、边框、背景、active状态等都需要改变，可以单独定义。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$btn</span>: (</span><br><span class="line">    light: (</span><br><span class="line">        color: <span class="variable">$gray1</span>, border: <span class="variable">$gray0</span>, bg: transparent,</span><br><span class="line">        color-active: <span class="number">#fff</span>, border-active: <span class="variable">$red</span>, bg-active: <span class="variable">$red</span></span><br><span class="line">    ),</span><br><span class="line">    dark: ( …… ),</span><br><span class="line">    blue: ( …… ),</span><br><span class="line">    yellow: ( …… ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">@each</span> <span class="variable">$name</span>, <span class="variable">$theme</span> in <span class="variable">$btn</span> &#123;</span><br><span class="line">    <span class="selector-class">.btn--</span>#&#123;<span class="variable">$name</span>&#125; &#123;</span><br><span class="line">        <span class="attribute">color</span>: map-get(<span class="variable">$theme</span>, color);</span><br><span class="line">        <span class="attribute">border-color</span>: map-get(<span class="variable">$theme</span>, border);</span><br><span class="line">        <span class="attribute">background-color</span>: map-get(<span class="variable">$theme</span>, bg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.btn--</span>#&#123;<span class="variable">$name</span>&#125;<span class="selector-pseudo">:active</span>, <span class="selector-class">.btn--</span>#&#123;<span class="variable">$name</span>&#125;-active &#123;</span><br><span class="line">        <span class="attribute">color</span>: map-get(<span class="variable">$theme</span>, color-active);</span><br><span class="line">        <span class="attribute">border-color</span>: map-get(<span class="variable">$theme</span>, border-active);</span><br><span class="line">        <span class="attribute">background-color</span>: map-get(<span class="variable">$theme</span>, bg-active);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>将主题颜色与其他不变的样式分离出来进行管理，所有的主题颜色维护在_theme.scss中，从而极大地提高了代码的可维护性。在切换主题的时候，只需要更换相应的类名，尤其在结合react开发时，theme变化时只需要重新setState一下就会重新渲染页面，十分方便。</p>
<h3 id="定义通用样式"><a href="#定义通用样式" class="headerlink" title="定义通用样式"></a>定义通用样式</h3><p>可以通过sass提供的@mixin, @function等方式定义通用样式，如可以将实现单行\多行文字截断效果的一组样式封装，用@mixin定义line-ellipsis方法，参数为行数和行高。传入行高是为了兼容不支持多行截断的浏览器，计算得出最大高度，防止样式错乱。其中行数的默认值为1，行高的默认值为1.5，可以使用@if,@else去判断行数，根据$num值去返回样式。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@mixin</span> line-ellipsis(<span class="variable">$num</span>: <span class="number">1</span>, <span class="variable">$lineH</span>: <span class="number">1.5</span>)&#123;</span><br><span class="line">     <span class="keyword">@if</span> <span class="variable">$num</span> &gt; <span class="number">1</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">        -webkit-box-orient: vertical;</span><br><span class="line">        -webkit-line-clamp: <span class="variable">$num</span>;</span><br><span class="line">        <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="variable">$lineH</span>;</span><br><span class="line">        <span class="attribute">max-height</span>: <span class="variable">$lineH</span> * <span class="variable">$num</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">     &#125; <span class="keyword">@else</span> &#123;</span><br><span class="line">        <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">        <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="variable">$lineH</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在使用的时候，通过@include方法引用，如下所示：<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">    <span class="keyword">@include</span> line-ellipsis();  <span class="comment">//默认单行截断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.desc</span> &#123;</span><br><span class="line">    <span class="keyword">@include</span> line-ellipsis(<span class="number">3</span>, rem(<span class="number">38</span>));  <span class="comment">//3行截断</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>desc这个类是多行截断，其中行高是rem(38)，调用了sass定义的px转rem的函数，是将38像素转为rem值。借助sass，可以方便地定义将像素转为rem。<br><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@function</span> rem(<span class="variable">$px</span>, <span class="variable">$base-font-size</span>: <span class="number">75px</span>) &#123;</span><br><span class="line">  <span class="keyword">@if</span> (unitless(<span class="variable">$px</span>)) &#123;     <span class="comment">//unitless(75) =&gt; true; unitless(75px) =&gt; false</span></span><br><span class="line">    <span class="keyword">@return</span> rem(<span class="variable">$px</span> + <span class="number">0px</span>);</span><br><span class="line">  &#125; <span class="keyword">@else</span> if (unit(<span class="variable">$px</span>) == rem) &#123;  <span class="comment">//unit(75px) =&gt; px; unitless(1rem) =&gt; rem</span></span><br><span class="line">    <span class="keyword">@return</span> <span class="variable">$px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">@return</span> (<span class="variable">$px</span> / <span class="variable">$base-font-size</span>) * <span class="number">1rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在rem()函数中设置了两个参数$px和$base-font-size，并且给$base-font-size设置了默认值75px。rem布局使用了淘宝的lib.flexible方案，所以默认值为75px。而且在rem()函数中使用了unitless去判断$px是否携带单位，若没带为true，否则为false。若$px没带单位，则通过+0px的方式带上px单位。若$px带单位，用unit获取$px带的单位，若是rem，则直接返回，其他的，与$base-font-size相除得到rem值。<br>除此之外，可以结合项目需求定义更多的方法，如通用的button样式、适配浏览器分辨率、兼容性等等。</p>
<p>参考链接：<br><a href="http://sass-lang.com/documentation/Sass/Script/Functions.html" target="_blank" rel="noopener">Module: Sass::Script::Functions</a><br><a href="http://www.smashingmagazine.com/2014/06/12/sassy-z-index-management-for-complex-layouts/" target="_blank" rel="noopener">A Better Solution for Managing z-index with Sass</a><br><a href="http://erskinedesign.com/blog/friendlier-colour-names-sass-maps/#solving-issue-1-the-naming-of-things" target="_blank" rel="noopener">Friendlier colour names with Sass maps</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sherrywu0917.github.io/2017/08/28/sass应用/" data-id="clsshtuwx001uwqrtmxnhss09" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css/">css</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sass/">sass</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/10/19/日常经验积累/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          日常经验积累
        
      </div>
    </a>
  
  
    <a href="/2017/07/27/分站开发总结/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">项目开发record</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSR/">SSR</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Themis，CMS体验度量方案/">Themis，CMS体验度量方案</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/autobind/">autobind</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/core-decorators/">core-decorators</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decorator/">decorator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decorators源码简析——debounce/">decorators源码简析——debounce</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/diff/">diff</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echarts/">echarts</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es7/">es7</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventloop/">eventloop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/font-face/">font-face</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hook/">hook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lazyInitialize/">lazyInitialize</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/load/">load</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/loader/">loader</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lottie/">lottie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm包/">npm包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/readonly/">readonly</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/require/">require</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/">sass</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/setState/">setState</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sitespeed-io/">sitespeed.io</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webp/">webp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/下载/">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/兼容/">兼容</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/函数式编程/">函数式编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端性能优化/">前端性能优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端打包/">前端打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/原型链/">原型链</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/总结/">总结</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/插件/">插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/渲染/">渲染</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组件开发/">组件开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组合式继承/">组合式继承</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/继承/">继承</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/角度渐变/">角度渐变</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高阶组件/">高阶组件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/SSR/" style="font-size: 10px;">SSR</a> <a href="/tags/Themis，CMS体验度量方案/" style="font-size: 10px;">Themis，CMS体验度量方案</a> <a href="/tags/autobind/" style="font-size: 10px;">autobind</a> <a href="/tags/core-decorators/" style="font-size: 15.71px;">core-decorators</a> <a href="/tags/css/" style="font-size: 12.86px;">css</a> <a href="/tags/decorator/" style="font-size: 17.14px;">decorator</a> <a href="/tags/decorators源码简析——debounce/" style="font-size: 11.43px;">decorators源码简析——debounce</a> <a href="/tags/diff/" style="font-size: 14.29px;">diff</a> <a href="/tags/echarts/" style="font-size: 10px;">echarts</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/es7/" style="font-size: 10px;">es7</a> <a href="/tags/eventloop/" style="font-size: 11.43px;">eventloop</a> <a href="/tags/font-face/" style="font-size: 10px;">font-face</a> <a href="/tags/hook/" style="font-size: 10px;">hook</a> <a href="/tags/js/" style="font-size: 18.57px;">js</a> <a href="/tags/lazyInitialize/" style="font-size: 10px;">lazyInitialize</a> <a href="/tags/load/" style="font-size: 10px;">load</a> <a href="/tags/loader/" style="font-size: 10px;">loader</a> <a href="/tags/lottie/" style="font-size: 10px;">lottie</a> <a href="/tags/npm包/" style="font-size: 10px;">npm包</a> <a href="/tags/react/" style="font-size: 20px;">react</a> <a href="/tags/readonly/" style="font-size: 10px;">readonly</a> <a href="/tags/require/" style="font-size: 10px;">require</a> <a href="/tags/sass/" style="font-size: 10px;">sass</a> <a href="/tags/setState/" style="font-size: 10px;">setState</a> <a href="/tags/sitespeed-io/" style="font-size: 10px;">sitespeed.io</a> <a href="/tags/webp/" style="font-size: 10px;">webp</a> <a href="/tags/webpack/" style="font-size: 14.29px;">webpack</a> <a href="/tags/下载/" style="font-size: 10px;">下载</a> <a href="/tags/兼容/" style="font-size: 11.43px;">兼容</a> <a href="/tags/函数式编程/" style="font-size: 10px;">函数式编程</a> <a href="/tags/前端性能优化/" style="font-size: 12.86px;">前端性能优化</a> <a href="/tags/前端打包/" style="font-size: 10px;">前端打包</a> <a href="/tags/原型链/" style="font-size: 10px;">原型链</a> <a href="/tags/总结/" style="font-size: 12.86px;">总结</a> <a href="/tags/插件/" style="font-size: 10px;">插件</a> <a href="/tags/渲染/" style="font-size: 12.86px;">渲染</a> <a href="/tags/组件开发/" style="font-size: 10px;">组件开发</a> <a href="/tags/组合式继承/" style="font-size: 10px;">组合式继承</a> <a href="/tags/继承/" style="font-size: 11.43px;">继承</a> <a href="/tags/角度渐变/" style="font-size: 10px;">角度渐变</a> <a href="/tags/高阶组件/" style="font-size: 10px;">高阶组件</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">October 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">September 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/02/19/rrweb原理&录屏上报实践/">rrweb带你还原问题现场</a>
          </li>
        
          <li>
            <a href="/2024/02/19/react相关问题V2/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/19/module引入方式/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/02/19/js_roadmap/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/11/02/webpack-loader总结/">webpack-loader总结</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 Sherry<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>