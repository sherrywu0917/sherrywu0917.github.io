
``` js
function instance(Cls, ...params) {
    var obj = {};
    Cls.apply(obj, params);
    // for(var key in Cls.prototype) {
    //     obj[key] = Cls.prototype[key];
    // }
    obj['__proto__'] = Cls.prototype;
    return obj
}

function filterStr(str) {
    let stack = [];
    for(var char of str) {
        if(char !== 'b') {
            if(char === 'c') {
                let len = stack.length;
                if(stack[len -1] === 'a') {
                    stack.splice(len-2)
                }
                else {
                    stack.push(char)
                }
            }
            else {
                stack.push(char)
            }
        }
    }
    return stack.join('');
}


//输出0 1 2 3 4 5
//https://juejin.im/post/58cf180b0ce4630057d6727c#heading-1
var tasks = [];
for (var i = 0; i < 5; i++) {
    (function(j) {
        tasks.push(new Promise((resolve, reject) => {
                setTimeout(() => {
                    console.log(new Date, j);
                    resolve();
                }, 1000 * j);  // 这里修改 0~4 的定时器时间
            })
        )
    })(i);
}

Promise.all(tasks).then(() => {
    setTimeout(() => {
        console.log(new Date, i);
    }, 1000)
})

//输出0 1 2 3 4 5
var tasks = [];
for (var i = 0; i < 5; i++) {
    tasks.push(((j) => new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log(new Date, j);
                resolve();
            }, 1000 * j);  // 这里修改 0~4 的定时器时间
        }))(i)
    )
}

Promise.all(tasks).then(() => {
    setTimeout(() => {
        console.log(new Date, i);
    }, 1000)
})

//输出0 1 2 3 4 5
const sleep = (timeountMS) => new Promise((resolve) => {
    setTimeout(resolve, timeountMS);
});
(async() => {
    for (var i = 0; i < 5; i++) {
        await sleep(1000);
        console.log(new Date, i);
    }
    
    await sleep(1000);
    console.log(new Date, i);
})()

//编写一个程序将数组扁平化去并除其中重复部分数据，最终得到一个升序且不重复的数组
var arr = [ [1, 2, 2], [3, 4, 5, 5], [6, 7, 8, 9, [11, 12, [12, 13, [14] ] ] ], 10];
Array.from(new Set(arr.flat(Infinity))).sort((a, b) => (a - b))
```