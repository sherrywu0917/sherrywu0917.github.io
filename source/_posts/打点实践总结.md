---
title: 打点实践总结
date: 2019-03-07 11:02:29
tags:
---
beacon 请求方法均为POST，且不支持修改
兼容性 https://caniuse.com/#search=beacon
- polyfill https://github.com/kronicker/sendbeacon-polyfill/blob/master/sendbeacon.js
- https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/sendBeacon
- [如何在 Web 关闭页面时发送 Ajax 请求](https://juejin.im/post/5c7e541b6fb9a049e06415a5?utm_source=gold_browser_extension)
- [[译] 使用 Web Beacon API 记录活动](https://juejin.im/post/5b694b5de51d4519700fa56a)

post请求
content-type:
### application/json

Request Payload:
{layouts: ["1", "2", "5"]}

### application/x-www-form-urlencoded

Query String Parameters
sourceUuid:np_c3sEKMgU3Xau_Tl0fmsqyReIdKH9OXQpby_FSNhz__ppcy0EKQ
articleUuid:np_eXoyZJwfsX-q8j5OLm0pyEbYGK0
forceFollow:0
isContinue:0
forceAutoPurchase:1

### multipart/form-data
使用表单上传文件时，必须让 form 的 enctype 等于这个值。
Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryBJIFBCE2CA2Fwbyl


